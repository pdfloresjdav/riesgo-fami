(this["webpackJsonpriesgo-fami"]=this["webpackJsonpriesgo-fami"]||[]).push([[0],{46:function(e,t,s){},91:function(e,t,s){},92:function(e,t,s){"use strict";s.r(t);var n=s(1),c=s.n(n),r=s(17),a=s.n(r),i=(s(46),s(5)),o=s(10),l=s(4),d=Object(n.createContext)(),u=s(6),m=s(20),j=s(2),b=["isAuthenticated","component"],g=function(e){var t=e.isAuthenticated,s=e.component,n=Object(m.a)(e,b);return localStorage.setItem("lastPath",n.location.pathname),Object(j.jsx)(l.b,Object(u.a)(Object(u.a)({},n),{},{component:function(e){return t?Object(j.jsx)(s,Object(u.a)({},e)):Object(j.jsx)(l.a,{to:"/login"})}}))},O=["isAuthenticated","component"],h=function(e){var t=e.isAuthenticated,s=e.component,n=Object(m.a)(e,O);return Object(j.jsx)(l.b,Object(u.a)(Object(u.a)({},n),{},{component:function(e){return t?Object(j.jsx)(l.a,{to:"/home"}):Object(j.jsx)(s,Object(u.a)({},e))}}))},f="[auth] login",p="[auth] logout",x=s(19),v=s(38),y=s.n(v),I=s(11),N=s.n(I),w=s(12),E=s(13),C=s.n(E),k=function(){var e=Object(w.a)(N.a.mark((function e(t,s){var n;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C.a.post("https://laravel.alusoft.co/api/login?dni="+t+"&password="+s,{});case 3:return n=e.sent,e.abrupt("return",n.data);case 7:throw e.prev=7,e.t0=e.catch(0),e.t0;case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,s){return e.apply(this,arguments)}}(),B=s(3),S=function(){return Object(j.jsx)("div",{className:"footer-section",children:Object(j.jsx)(B.e,{logo:Object(j.jsx)("div",{children:Object(j.jsx)("img",{src:"./assets/idWFPp.png",alt:"footer logo",className:"footer-img"})}),logoExtended:Object(j.jsx)("div",{}),children:"\xa0"})})},L=function(e){var t=e.history,s=Object(n.useContext)(d).dispatch,c=Object(l.h)(),r=y.a.parse(c.search).q,a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(n.useState)(e),s=Object(i.a)(t,2),c=s[0],r=s[1],a=function(e){var t=e.target;r(Object(u.a)(Object(u.a)({},c),{},Object(x.a)({},t.name,t.value)))};return[c,a,function(){r(e)}]}({userName:void 0===r?"":r}),o=Object(i.a)(a,2),m=o[0],b=o[1],g=m.userName;Object(n.useEffect)((function(){document.getElementById("userName-error-msg").style.display="none",document.getElementById("userPassword-error-msg").style.display="none"}),[]);return Object(j.jsxs)("div",{className:"fund-main",children:[Object(j.jsx)("img",{src:"./assets/idEDUF.png",alt:"header",className:"img-head"}),Object(j.jsx)("div",{className:"text-login-main",children:Object(j.jsxs)(B.f,{onSubmit:function(e){e.preventDefault();var n=document.getElementById("btnIngresar");n.classList.remove("btn-wfp-main"),n.classList.add("btn-wfp-main-press");var c=localStorage.getItem("lastPath")||"/",r=document.getElementById("userPassword").value,a=document.getElementById("userName");""===g?(a.classList.add("is-invalid"),document.getElementById("userName-error-msg").classList.add("wfp--form-requirement-show"),document.getElementById("userName-error-msg").style.display="block"):(a.classList.remove("is-invalid"),document.getElementById("userName-error-msg").classList.remove("wfp--form-requirement-show"));var i=document.getElementById("userPassword");(""===r?(i.classList.add("is-invalid"),document.getElementById("userPassword-error-msg").classList.add("wfp--form-requirement-show"),document.getElementById("userPassword-error-msg").style.display="block"):(i.classList.remove("is-invalid"),document.getElementById("userPassword-error-msg").classList.remove("wfp--form-requirement-show")),""!==g&&""!==r)&&k(g,r).then((function(e){s({type:f,payload:{name:e.data.user.name,token:e.data.access_token}}),t.replace(c)})).catch((function(e){console.warn(e),document.getElementById("invalidMessage").classList.add("invalid-tooltip-active")}))},className:"needs-validation",children:[Object(j.jsx)("strong",{id:"invalidMessage",className:"invalid-feedback",children:"* Identificaci\xf3n y/o Contrase\xf1a invalidas"}),Object(j.jsx)(B.m,{placeholder:"Identificaci\xf3n",className:"form-control txt-input",name:"userName",id:"userName",autoComplete:"off",value:g,onChange:b,invalid:{message:""},invalidText:"Identificaci\xf3n requerido",required:!0}),Object(j.jsx)(B.m,{type:"password",placeholder:"Contrase\xf1a",className:"form-control mb-3 txt-input",id:"userPassword",name:"userPassword",autoComplete:"off",invalid:{message:""},invalidText:"Contrase\xf1a requerida",required:!0}),Object(j.jsx)("br",{}),Object(j.jsx)(B.d,{id:"btnIngresar",type:"submit",className:"btn m-1 btn-block btn-wfp-main",children:"Ingresar"}),Object(j.jsx)("br",{}),Object(j.jsx)("br",{}),"\xbfAun no se ha registrado?",Object(j.jsx)("br",{}),"Por favor registrese",Object(j.jsx)("br",{}),Object(j.jsx)("br",{}),Object(j.jsx)("a",{href:"/registry",className:"btn m-1 btn-block btn-wfp-main",onClick:function(e){e.currentTarget.classList.remove("btn-wfp-main"),e.currentTarget.classList.add("btn-wfp-main-press")},children:"Registrarse"})]})}),Object(j.jsx)(S,{})]})},P=function(){var e=Object(n.useContext)(d),t=e.user.name,s=e.dispatch,c=Object(l.g)();return Object(j.jsxs)(B.h,{logo:Object(j.jsxs)("div",{className:"wfp--main-navigation__logo",children:[Object(j.jsx)(B.g,{href:"/home",children:Object(j.jsx)("img",{src:"/assets/idWFP.png",alt:"menu logo",className:"menu-img"})}),Object(j.jsx)("span",{className:"menu-title",children:"EDUFAMI"})]}),children:[Object(j.jsx)(B.i,{children:Object(j.jsx)(B.g,{href:"/home",children:"Cursos"})}),Object(j.jsx)(B.i,{children:Object(j.jsx)(B.g,{href:"/account",children:"Mis Datos"})}),Object(j.jsx)(B.i,{children:Object(j.jsx)(B.g,{href:"/lenguages",children:"Mi Lengua"})}),Object(j.jsx)(B.i,{children:Object(j.jsx)(B.g,{href:"/certificates",children:"Mis Certificados"})}),Object(j.jsx)(B.i,{children:Object(j.jsx)(B.g,{href:"/progress",children:"Mi Progreso"})}),Object(j.jsx)("hr",{className:"dropdown-divider"}),Object(j.jsx)(B.i,{children:Object(j.jsx)(B.g,{href:"/information",children:"Informaci\xf3n EDUFAMI"})}),Object(j.jsx)(B.i,{className:"wfp--main-navigation__user",subNavigation:Object(j.jsx)(B.j,{children:Object(j.jsx)(B.k,{children:Object(j.jsx)(B.l,{children:Object(j.jsx)(B.d,{className:"nav-item nav-link btn",onClick:function(){c.replace("/login"),s({type:p})},children:"Cerrar Sesi\xf3n"})})})}),children:Object(j.jsx)(B.n,{ellipsis:!0,name:t,missingImage:"letter"})})]})},_=s(26);function M(e,t,s){var c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",a=Object(n.useState)(!0),o=Object(i.a)(a,2),l=o[0],d=o[1],u=Object(n.useState)(!1),m=Object(i.a)(u,2),j=m[0],b=m[1],g=Object(n.useState)([]),O=Object(i.a)(g,2),h=O[0],f=O[1],p=Object(n.useState)(!1),x=Object(i.a)(p,2),v=x[0],y=x[1],I=c?"&"+c+"="+r:"",E=Object(n.useCallback)(Object(w.a)(N.a.mark((function n(){var c,r;return N.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c=localStorage.getItem("userToken"),n.prev=1,n.next=4,C.a.get("https://laravel.alusoft.co/api/"+s+"?offset="+e+"&limit="+t+I,{headers:{Authorization:"Bearer "+c}});case 4:r=n.sent,f((function(e){return[].concat(Object(_.a)(e),Object(_.a)(r.data.data))})),d(!1),r.data.data.length<t?y(!1):y(!0),n.next=14;break;case 10:throw n.prev=10,n.t0=n.catch(1),b(n.t0),j;case 14:case"end":return n.stop()}}),n,null,[[1,10]])}))),[e,j,t,s,I]);return Object(n.useEffect)((function(){E()}),[e,E]),{loading:l,error:j,list:h,hasMore:v}}var q=function(){var e=Object(n.useContext)(d).dispatch,t=Object(l.g)(),s=Object(n.useState)(0),c=Object(i.a)(s,2),r=c[0],a=c[1],o=M(r,3,"courses"),u=o.loading,m=o.error,b=o.list,g=o.hasMore,O=Object(n.useRef)(null),h=Object(n.useRef)(),f=Object(n.useCallback)((function(e){h.current&&h.current.disconnect(),h.current=new IntersectionObserver((function(e){e[0].isIntersecting&&g&&a((function(e){return e+3}))})),e&&h.current.observe(e)}),[g]);m&&(console.log(m),e({type:p}),t.replace("/login"));return Object(j.jsxs)("div",{className:"content",children:[Object(j.jsx)("div",{className:"text-title",children:"Cursos"}),Object(j.jsxs)("div",{className:"fund-main-enter",children:[Object(j.jsx)(B.a,{children:Object(j.jsx)(B.c,{children:Object(j.jsx)("a",{href:"/home",children:Object(j.jsx)(B.b,{})})})}),Object(j.jsx)("div",{className:"content-courses",children:b&&function(){var e=b;return localStorage.setItem("courses",JSON.stringify(e)),e.map((function(e){return"activo"===e.state_name?"RIESGOFAMI"===e.name_course?Object(j.jsx)("div",{ref:f,children:Object(j.jsx)(B.g,{href:"/course/".concat(e.id),children:Object(j.jsx)("img",{src:"./assets/idRIESGOF.png",alt:e.name_course,className:"img-course"})})},e.id):Object(j.jsx)("div",{ref:f,children:Object(j.jsx)(B.g,{href:"/course/".concat(e.id),children:Object(j.jsx)("img",{src:"https://laravel.alusoft.co"+e.image_course,alt:e.name_course,className:"img-course"})})},e.id):null}))}()}),u&&Object(j.jsx)("p",{children:"Loading..."}),m&&Object(j.jsx)("p",{children:"Error!"}),Object(j.jsx)("div",{ref:O})]})]})},A=function(){return Object(j.jsxs)("div",{children:[Object(j.jsx)("h1",{children:"Mis Datos"}),Object(j.jsx)("hr",{})]})},F=function(){return Object(j.jsx)("div",{children:Object(j.jsx)("h1",{children:"Mi Lengua"})})};function D(){return Object(j.jsx)("div",{children:Object(j.jsx)("h1",{children:"Mis Certificados"})})}var T=function(){return Object(j.jsx)("div",{children:Object(j.jsx)("h1",{children:"Mi Pogreso"})})},R=function(){return Object(j.jsx)("div",{children:Object(j.jsx)("h1",{children:"Informacion EDUFAMI"})})},J=function(){var e=Object(n.useContext)(d).dispatch,t=Object(l.g)(),s=Object(n.useState)(0),c=Object(i.a)(s,2),r=c[0],a=c[1],o=Object(l.i)().cursoId,u=localStorage.getItem("course")?JSON.parse(localStorage.getItem("course")):"",m=M(r,3,"course/units","course_id",o),b=m.loading,g=m.error,O=m.list,h=m.hasMore,f=Object(n.useRef)(null),x=Object(n.useRef)(),v=Object(n.useCallback)((function(e){x.current&&x.current.disconnect(),x.current=new IntersectionObserver((function(e){e[0].isIntersecting&&h&&a((function(e){return e+3}))})),e&&x.current.observe(e)}),[h]);g&&(console.log(g),e({type:p}),t.replace("/login")),""===u&&t.replace("/home");return Object(j.jsxs)("div",{className:"content",children:[Object(j.jsx)("div",{className:"text-title",children:u&&u.name_course}),Object(j.jsxs)("div",{className:"fund-main-enter",children:[Object(j.jsxs)(B.a,{children:[Object(j.jsx)(B.c,{children:Object(j.jsx)("a",{href:"/home",children:Object(j.jsx)(B.b,{})})}),Object(j.jsx)(B.c,{href:"/course/".concat(o),children:u&&u.name_course}),Object(j.jsx)(B.c,{disableLink:!0,children:"Unidades"})]}),Object(j.jsx)("div",{className:"content-courses",children:O&&function(){var e=O;return console.log(e),e.map((function(e){return"activo"===e.state_name?"RIESGOFAMI"===e.name_course?Object(j.jsx)("div",{ref:v,children:Object(j.jsx)(B.g,{href:"/home",children:Object(j.jsx)("img",{src:"./assets/idRIESGOF.png",alt:e.name_course,className:"img-course"})})},e.id):Object(j.jsx)("div",{ref:v,children:Object(j.jsx)(B.g,{href:"/home",children:Object(j.jsx)("img",{src:"https://laravel.alusoft.co"+e.image_unit,alt:e.name_course,className:"img-course"})})},e.id):null}))}()}),b&&Object(j.jsx)("p",{children:"Loading..."}),g&&Object(j.jsx)("p",{children:"Error!"}),Object(j.jsx)("div",{ref:f})]})]})},U=function(){var e=Object(n.useContext)(d).dispatch,t=Object(l.g)(),s=Object(n.useState)(""),c=Object(i.a)(s,2),r=c[0],a=c[1],o=Object(n.useState)(""),u=Object(i.a)(o,2),m=u[0],b=u[1],g=Object(l.i)().cursoId,O=JSON.parse(localStorage.getItem("courses")),h="";O||(e({type:p}),t.replace("/home")),Object(n.useEffect)((function(){void 0!==h?(a(h.name_course),b("RIESGOFAMI"===h.name_course?"/assets/IN_riesgof.png":"https://laravel.alusoft.co"+h.image_course),localStorage.setItem("course",JSON.stringify(h))):t.replace("/home")}),[h]);return Object(j.jsxs)("div",{className:"content",children:[Object(j.jsx)("div",{className:"text-title",children:r}),Object(j.jsxs)(B.a,{children:[Object(j.jsx)(B.c,{children:Object(j.jsx)("a",{href:"/home",children:Object(j.jsx)(B.b,{})})}),Object(j.jsx)(B.c,{disableLink:!0,children:r})]}),Object(j.jsx)("div",{className:"fund-main-course",children:Object(j.jsx)("div",{className:"content-course",children:O&&((h=O.find((function(e){return e.id==g})))?Object(j.jsxs)("div",{children:[Object(j.jsx)("img",{src:m,alt:h.name_course,className:"img-course"}),Object(j.jsxs)("div",{className:"course-description",children:[h.description_course,Object(j.jsx)("div",{className:"course-enter",children:Object(j.jsx)(B.g,{href:"/units/".concat(h.id),children:Object(j.jsx)(B.d,{id:"btnIngresar",type:"submit",className:"btn m-1 btn-block btn-wfp-main",children:"Ingresar"})})})]})]},h.id):null)})})]})},G=function(){return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(P,{}),Object(j.jsx)("div",{className:"container mt-2",children:Object(j.jsxs)(l.d,{children:[Object(j.jsx)(l.b,{exact:!0,path:"/home",component:q}),Object(j.jsx)(l.b,{exact:!0,path:"/account",component:A}),Object(j.jsx)(l.b,{exact:!0,path:"/languages",component:F}),Object(j.jsx)(l.b,{exact:!0,path:"/certificates",component:D}),Object(j.jsx)(l.b,{exact:!0,path:"/progress",component:T}),Object(j.jsx)(l.b,{exact:!0,path:"/information",component:R}),Object(j.jsx)(l.b,{exact:!0,path:"/course/:cursoId",component:U}),Object(j.jsx)(l.b,{exact:!0,path:"/units/:cursoId",component:J}),Object(j.jsx)(l.a,{to:"/home"})]})})]})},W=function(){var e=Object(w.a)(N.a.mark((function e(t,s,n,c,r){var a;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C.a.post("https://laravel.alusoft.co/api"+"/register?name=".concat(t,"&email=").concat(s,"&password=").concat(c,"&dni=").concat(n,"&password_confirmation=").concat(r),{});case 3:return a=e.sent,e.abrupt("return",a.data);case 7:throw e.prev=7,e.t0=e.catch(0),console.log(e.t0),e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,s,n,c,r){return e.apply(this,arguments)}}(),z=function(e){var t=e.history,s=Object(n.useContext)(d).dispatch;Object(n.useEffect)((function(){document.getElementById("userName-error-msg").style.display="none",document.getElementById("userEmail-error-msg").style.display="none",document.getElementById("userPassword-error-msg").style.display="none",document.getElementById("userConfPassword-error-msg").style.display="none",document.getElementById("userDni-error-msg").style.display="none"}),[]);return Object(j.jsxs)("div",{className:"fund-main",children:[Object(j.jsx)("img",{src:"./assets/idEDUF.png",alt:"header",className:"img-head"}),Object(j.jsx)("div",{className:"text-reg-main",children:Object(j.jsxs)(B.f,{onSubmit:function(e){e.preventDefault();var n=document.getElementById("btnIngresar");n.classList.remove("btn-wfp-main"),n.classList.add("btn-wfp-main-press");var c=localStorage.getItem("lastPath")||"/",r=document.getElementById("userName"),a=r.value,i=document.getElementById("userEmail"),o=i.value,l=document.getElementById("userPassword"),d=l.value,u=document.getElementById("userConfPassword"),m=u.value,j=document.getElementById("userDni"),b=j.value;""===a?(r.classList.add("is-invalid"),document.getElementById("userName-error-msg").style.display="block"):(r.classList.remove("is-invalid"),document.getElementById("userName-error-msg").style.display="none"),""===o?(i.classList.add("is-invalid"),document.getElementById("userEmail-error-msg").style.display="block"):document.getElementById("userEmail-error-msg").style.display="none",""===d?(l.classList.add("is-invalid"),document.getElementById("userPassword-error-msg").style.display="block"):document.getElementById("userPassword-error-msg").style.display="none",""===m?(u.classList.add("is-invalid"),document.getElementById("userConfPassword-error-msg").style.display="block"):document.getElementById("userConfPassword-error-msg").style.display="none",""===b?(j.classList.add("is-invalid"),document.getElementById("userDni-error-msg").style.display="block"):document.getElementById("userDni-error-msg").style.display="none";var g=document.getElementById("invalidMessage");if(d===m){if(""!==a&&""!==o&&""!==b&&""!==d&&""!==m)W(a,o,b,d,m).then((function(e){s({type:f,payload:{name:e.data.user.name,token:e.data.access_token}}),t.replace(c)})).catch((function(e){console.warn(e)}));g.classList.remove("invalid-tooltip-active")}else g.classList.add("invalid-tooltip-active")},className:"needs-validation",children:[Object(j.jsx)("strong",{id:"invalidMessage",className:"invalid-feedback",children:"* Contrase\xf1a y confirmacion de Contrase\xf1a deben ser iguales"}),Object(j.jsx)(B.m,{placeholder:"Nombre",className:"form-control txt-input",name:"userName",id:"userName",autoComplete:"off",invalid:{message:""},invalidText:"Nombre requerido",required:!0}),Object(j.jsx)(B.m,{type:"email",placeholder:"Email",className:"form-control txt-input",name:"userEmail",id:"userEmail",autoComplete:"off",invalid:{message:""},invalidText:"Email requerido",required:!0}),Object(j.jsx)(B.m,{placeholder:"Identificacion",className:"form-control txt-input",name:"userDni",id:"userDni",autoComplete:"off",invalid:{message:""},invalidText:"Identificaci\xf3n requerida",required:!0}),Object(j.jsx)(B.m,{type:"password",placeholder:"Contrase\xf1a",className:"form-control txt-input",id:"userPassword",name:"userPassword",autoComplete:"off",invalid:{message:""},invalidText:"Contrase\xf1a requerida",required:!0}),Object(j.jsx)(B.m,{type:"password",placeholder:"Confirma Contrase\xf1a",className:"form-control txt-input",id:"userConfPassword",name:"userConfPassword",autoComplete:"off",invalid:{message:""},invalidText:"Confirmaci\xf3n requerida",required:!0}),Object(j.jsx)(B.d,{id:"btnIngresar",type:"submit",className:"btn m-1 btn-block btn-outline-primary btn-wfp-main",children:"Registrarse"})]})}),Object(j.jsx)(S,{})]})},H=function(){return Object(j.jsxs)("div",{className:"fund-main",children:[Object(j.jsx)("img",{src:"./assets/idEDUF.png",alt:"header",className:"img-head"}),Object(j.jsxs)("div",{className:"text-main",children:["Aprender con Edufami es muy facil",Object(j.jsx)("br",{}),"Inicie su formacion Ahora",Object(j.jsx)("br",{}),Object(j.jsx)("br",{}),Object(j.jsx)("a",{href:"/login",className:"btn m-1 btn-block btn-outline-primary btn-wfp-main",onClick:function(e){e.currentTarget.classList.remove("btn-wfp-main"),e.currentTarget.classList.add("btn-wfp-main-press")},children:"Ingresar"})]}),Object(j.jsx)(S,{})]})},K=function(){var e=Object(n.useContext)(d).user;return Object(j.jsx)(o.a,{children:Object(j.jsx)("div",{children:Object(j.jsxs)(l.d,{children:[Object(j.jsx)(h,{exact:!0,path:"/",component:H,isAuthenticated:e.logged}),Object(j.jsx)(h,{exact:!0,path:"/login",component:L,isAuthenticated:e.logged}),Object(j.jsx)(h,{exact:!0,path:"/registry",component:z,isAuthenticated:e.logged}),Object(j.jsx)(g,{path:"/",component:G,isAuthenticated:e.logged})]})})})},Q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f:return localStorage.setItem("userToken",t.payload.token),Object(u.a)(Object(u.a)({},t.payload),{},{logged:!0});case p:return localStorage.removeItem("userToken"),{logged:!1};default:return e}},V=(s(91),function(){return JSON.parse(localStorage.getItem("user"))||{logged:!1}}),X=function(){var e=Object(n.useReducer)(Q,{},V),t=Object(i.a)(e,2),s=t[0],c=t[1];return Object(n.useEffect)((function(){localStorage.setItem("user",JSON.stringify(s))}),[s]),Object(j.jsx)(d.Provider,{value:{user:s,dispatch:c},children:Object(j.jsx)(K,{})})},Y=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,97)).then((function(t){var s=t.getCLS,n=t.getFID,c=t.getFCP,r=t.getLCP,a=t.getTTFB;s(e),n(e),c(e),r(e),a(e)}))};a.a.render(Object(j.jsx)(c.a.StrictMode,{children:Object(j.jsx)(X,{})}),document.getElementById("root")),Y()}},[[92,1,2]]]);
//# sourceMappingURL=main.257b1908.chunk.js.map