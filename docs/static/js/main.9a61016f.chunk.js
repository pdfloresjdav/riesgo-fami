(this["webpackJsonpriesgo-fami"]=this["webpackJsonpriesgo-fami"]||[]).push([[0],{46:function(e,t,s){},91:function(e,t,s){},92:function(e,t,s){"use strict";s.r(t);var n=s(1),c=s.n(n),r=s(17),a=s.n(r),i=(s(46),s(5)),o=s(10),l=s(4),d=Object(n.createContext)(),u=s(6),j=s(20),m=s(2),b=["isAuthenticated","component"],O=function(e){var t=e.isAuthenticated,s=e.component,n=Object(j.a)(e,b);return localStorage.setItem("lastPath",n.location.pathname),Object(m.jsx)(l.b,Object(u.a)(Object(u.a)({},n),{},{component:function(e){return t?Object(m.jsx)(s,Object(u.a)({},e)):Object(m.jsx)(l.a,{to:"/login"})}}))},g=["isAuthenticated","component"],h=function(e){var t=e.isAuthenticated,s=e.component,n=Object(j.a)(e,g);return Object(m.jsx)(l.b,Object(u.a)(Object(u.a)({},n),{},{component:function(e){return t?Object(m.jsx)(l.a,{to:"/home"}):Object(m.jsx)(s,Object(u.a)({},e))}}))},f="[auth] login",x="[auth] logout",p=s(3),v=function(){var e=Object(n.useContext)(d),t=e.user.name,s=e.dispatch,c=Object(l.g)();return Object(m.jsxs)(p.h,{logo:Object(m.jsxs)("div",{className:"wfp--main-navigation__logo",children:[Object(m.jsx)(p.g,{href:"/home",children:Object(m.jsx)("img",{src:"/assets/idWFP.png",alt:"menu logo",className:"menu-img"})}),Object(m.jsx)("span",{className:"menu-title",children:"EDUFAMI"})]}),children:[Object(m.jsx)(p.i,{children:Object(m.jsx)(p.g,{href:"/home",children:"Cursos"})}),Object(m.jsx)(p.i,{children:Object(m.jsx)(p.g,{href:"/account",children:"Mis Datos"})}),Object(m.jsx)(p.i,{children:Object(m.jsx)(p.g,{href:"/lenguages",children:"Mi Lengua"})}),Object(m.jsx)(p.i,{children:Object(m.jsx)(p.g,{href:"/certificates",children:"Mis Certificados"})}),Object(m.jsx)(p.i,{children:Object(m.jsx)(p.g,{href:"/progress",children:"Mi Progreso"})}),Object(m.jsx)("hr",{className:"dropdown-divider"}),Object(m.jsx)(p.i,{children:Object(m.jsx)(p.g,{href:"/information",children:"Informaci\xf3n EDUFAMI"})}),Object(m.jsx)(p.i,{className:"wfp--main-navigation__user",subNavigation:Object(m.jsx)(p.j,{children:Object(m.jsx)(p.k,{children:Object(m.jsx)(p.l,{children:Object(m.jsx)(p.d,{className:"nav-item nav-link btn",onClick:function(){c.replace("/login"),s({type:x})},children:"Cerrar Sesi\xf3n"})})})}),children:Object(m.jsx)(p.n,{ellipsis:!0,name:t,missingImage:"letter"})})]})},y=s(11),I=s.n(y),N=s(26),w=s(12),E=s(13),C=s.n(E);function k(e,t,s){var c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",a=Object(n.useState)(!0),o=Object(i.a)(a,2),l=o[0],d=o[1],u=Object(n.useState)(!1),j=Object(i.a)(u,2),m=j[0],b=j[1],O=Object(n.useState)([]),g=Object(i.a)(O,2),h=g[0],f=g[1],x=Object(n.useState)(!1),p=Object(i.a)(x,2),v=p[0],y=p[1],E=c?"&"+c+"="+r:"",k=Object(n.useCallback)(Object(w.a)(I.a.mark((function n(){var c,r;return I.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c=localStorage.getItem("userToken"),n.prev=1,n.next=4,C.a.get("https://laravel.alusoft.co/api/"+s+"?offset="+e+"&limit="+t+E,{headers:{Authorization:"Bearer "+c}});case 4:r=n.sent,f((function(e){return[].concat(Object(N.a)(e),Object(N.a)(r.data.data))})),d(!1),r.data.data.length<t?y(!1):y(!0),n.next=14;break;case 10:throw n.prev=10,n.t0=n.catch(1),b(n.t0),m;case 14:case"end":return n.stop()}}),n,null,[[1,10]])}))),[e,m,t,s,E]);return Object(n.useEffect)((function(){k()}),[e,k]),{loading:l,error:m,list:h,hasMore:v}}var B=function(){var e=Object(n.useContext)(d).dispatch,t=Object(l.g)(),s=Object(n.useState)(0),c=Object(i.a)(s,2),r=c[0],a=c[1],o=k(r,3,"courses"),u=o.loading,j=o.error,b=o.list,O=o.hasMore,g=Object(n.useRef)(null),h=Object(n.useRef)(),f=Object(n.useCallback)((function(e){h.current&&h.current.disconnect(),h.current=new IntersectionObserver((function(e){e[0].isIntersecting&&O&&a((function(e){return e+3}))})),e&&h.current.observe(e)}),[O]);j&&(console.log(j),e({type:x}),t.replace("/login"));return Object(m.jsxs)("div",{className:"content",children:[Object(m.jsx)("div",{className:"text-title",children:"Cursos"}),Object(m.jsxs)("div",{className:"fund-main-enter",children:[Object(m.jsx)(p.a,{children:Object(m.jsx)(p.c,{children:Object(m.jsx)("a",{href:"/home",children:Object(m.jsx)(p.b,{})})})}),Object(m.jsx)("div",{className:"content-courses",children:b&&function(){var e=b;return localStorage.setItem("courses",JSON.stringify(e)),e.map((function(e){return"activo"===e.state_name?"RIESGOFAMI"===e.name_course?Object(m.jsx)("div",{ref:f,children:Object(m.jsx)(p.g,{href:"/course/".concat(e.id),children:Object(m.jsx)("img",{src:"./assets/idRIESGOF.png",alt:e.name_course,className:"img-course"})})},e.id):Object(m.jsx)("div",{ref:f,children:Object(m.jsx)(p.g,{href:"/course/".concat(e.id),children:Object(m.jsx)("img",{src:"https://laravel.alusoft.co"+e.image_course,alt:e.name_course,className:"img-course"})})},e.id):null}))}()}),u&&Object(m.jsx)("p",{children:"Loading..."}),j&&Object(m.jsx)("p",{children:"Error!"}),Object(m.jsx)("div",{ref:g})]})]})},S=function(){return Object(m.jsxs)("div",{children:[Object(m.jsx)("h1",{children:"Mis Datos"}),Object(m.jsx)("hr",{})]})},L=function(){return Object(m.jsx)("div",{children:Object(m.jsx)("h1",{children:"Mi Lengua"})})};function P(){return Object(m.jsx)("div",{children:Object(m.jsx)("h1",{children:"Mis Certificados"})})}var _=function(){return Object(m.jsx)("div",{children:Object(m.jsx)("h1",{children:"Mi Pogreso"})})},M=function(){return Object(m.jsx)("div",{children:Object(m.jsx)("h1",{children:"Informacion EDUFAMI"})})},q=function(){var e=Object(n.useContext)(d).dispatch,t=Object(l.g)(),s=Object(n.useState)(0),c=Object(i.a)(s,2),r=c[0],a=c[1],o=Object(l.i)().cursoId,u=localStorage.getItem("course")?JSON.parse(localStorage.getItem("course")):"",j=k(r,3,"course/units","course_id",o),b=j.loading,O=j.error,g=j.list,h=j.hasMore,f=Object(n.useRef)(null),v=Object(n.useRef)(),y=Object(n.useCallback)((function(e){v.current&&v.current.disconnect(),v.current=new IntersectionObserver((function(e){e[0].isIntersecting&&h&&a((function(e){return e+3}))})),e&&v.current.observe(e)}),[h]);O&&(console.log(O),e({type:x}),t.replace("/login")),""===u&&t.replace("/home");return Object(m.jsxs)("div",{className:"content",children:[Object(m.jsx)("div",{className:"text-title",children:u&&u.name_course}),Object(m.jsxs)("div",{className:"fund-main-enter",children:[Object(m.jsxs)(p.a,{children:[Object(m.jsx)(p.c,{children:Object(m.jsx)("a",{href:"/home",children:Object(m.jsx)(p.b,{})})}),Object(m.jsx)(p.c,{href:"/course/".concat(o),children:u&&u.name_course}),Object(m.jsx)(p.c,{disableLink:!0,children:"Unidades"})]}),Object(m.jsx)("div",{className:"content-courses",children:g&&function(){var e=g;return console.log(e),e.map((function(e){return"activo"===e.state_name?"RIESGOFAMI"===e.name_course?Object(m.jsx)("div",{ref:y,children:Object(m.jsx)(p.g,{href:"/home",children:Object(m.jsx)("img",{src:"./assets/idRIESGOF.png",alt:e.name_course,className:"img-course"})})},e.id):Object(m.jsx)("div",{ref:y,children:Object(m.jsx)(p.g,{href:"/home",children:Object(m.jsx)("img",{src:"https://laravel.alusoft.co"+e.image_unit,alt:e.name_course,className:"img-course"})})},e.id):null}))}()}),b&&Object(m.jsx)("p",{children:"Loading..."}),O&&Object(m.jsx)("p",{children:"Error!"}),Object(m.jsx)("div",{ref:f})]})]})},A=function(){var e=Object(n.useContext)(d).dispatch,t=Object(l.g)(),s=Object(n.useState)(""),c=Object(i.a)(s,2),r=c[0],a=c[1],o=Object(n.useState)(""),u=Object(i.a)(o,2),j=u[0],b=u[1],O=Object(l.i)().cursoId,g=JSON.parse(localStorage.getItem("courses")),h="";g||(e({type:x}),t.replace("/home")),Object(n.useEffect)((function(){void 0!==h?(a(h.name_course),b("RIESGOFAMI"===h.name_course?"/assets/IN_riesgof.png":"https://laravel.alusoft.co"+h.image_course),localStorage.setItem("course",JSON.stringify(h))):t.replace("/home")}),[h]);return Object(m.jsxs)("div",{className:"content",children:[Object(m.jsx)("div",{className:"text-title",children:r}),Object(m.jsxs)(p.a,{children:[Object(m.jsx)(p.c,{children:Object(m.jsx)("a",{href:"/home",children:Object(m.jsx)(p.b,{})})}),Object(m.jsx)(p.c,{disableLink:!0,children:r})]}),Object(m.jsx)("div",{className:"fund-main-course",children:Object(m.jsx)("div",{className:"content-course",children:g&&((h=g.find((function(e){return e.id==O})))?Object(m.jsxs)("div",{children:[Object(m.jsx)("img",{src:j,alt:h.name_course,className:"img-course"}),Object(m.jsxs)("div",{className:"course-description",children:[h.description_course,Object(m.jsx)("div",{className:"course-enter",children:Object(m.jsx)(p.g,{href:"/units/".concat(h.id),children:Object(m.jsx)(p.d,{id:"btnIngresar",type:"submit",className:"btn m-1 btn-block btn-wfp-main",children:"Ingresar"})})})]})]},h.id):null)})})]})},F=function(){return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(v,{}),Object(m.jsx)("div",{className:"container mt-2",children:Object(m.jsxs)(l.d,{children:[Object(m.jsx)(l.b,{exact:!0,path:"/home",component:B}),Object(m.jsx)(l.b,{exact:!0,path:"/account",component:S}),Object(m.jsx)(l.b,{exact:!0,path:"/languages",component:L}),Object(m.jsx)(l.b,{exact:!0,path:"/certificates",component:P}),Object(m.jsx)(l.b,{exact:!0,path:"/progress",component:_}),Object(m.jsx)(l.b,{exact:!0,path:"/information",component:M}),Object(m.jsx)(l.b,{exact:!0,path:"/course/:cursoId",component:A}),Object(m.jsx)(l.b,{exact:!0,path:"/units/:cursoId",component:q})]})})]})},D=function(){return Object(m.jsx)("div",{className:"footer-section",children:Object(m.jsx)(p.e,{logo:Object(m.jsx)("div",{children:Object(m.jsx)("img",{src:"./assets/idWFPp.png",alt:"footer logo",className:"footer-img"})}),logoExtended:Object(m.jsx)("div",{}),children:"\xa0"})})},T=function(){return Object(m.jsxs)("div",{className:"fund-main",children:[Object(m.jsx)("img",{src:"./assets/idEDUF.png",alt:"header",className:"img-head"}),Object(m.jsxs)("div",{className:"text-main",children:["Aprender con Edufami es muy facil",Object(m.jsx)("br",{}),"Inicie su formacion Ahora",Object(m.jsx)("br",{}),Object(m.jsx)("br",{}),Object(m.jsx)("a",{href:"/login",className:"btn m-1 btn-block btn-outline-primary btn-wfp-main",onClick:function(e){e.currentTarget.classList.remove("btn-wfp-main"),e.currentTarget.classList.add("btn-wfp-main-press")},children:"Ingresar"})]}),Object(m.jsx)(D,{})]})},R=s(19),J=s(39),U=s.n(J),G=function(){var e=Object(w.a)(I.a.mark((function e(t,s){var n;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C.a.post("https://laravel.alusoft.co/api/login?dni="+t+"&password="+s,{});case 3:return n=e.sent,e.abrupt("return",n.data);case 7:throw e.prev=7,e.t0=e.catch(0),e.t0;case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,s){return e.apply(this,arguments)}}(),W=function(e){var t=e.history,s=Object(n.useContext)(d).dispatch,c=Object(l.h)(),r=U.a.parse(c.search).q,a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(n.useState)(e),s=Object(i.a)(t,2),c=s[0],r=s[1],a=function(e){var t=e.target;r(Object(u.a)(Object(u.a)({},c),{},Object(R.a)({},t.name,t.value)))};return[c,a,function(){r(e)}]}({userName:void 0===r?"":r}),o=Object(i.a)(a,2),j=o[0],b=o[1],O=j.userName;Object(n.useEffect)((function(){document.getElementById("userName-error-msg").style.display="none",document.getElementById("userPassword-error-msg").style.display="none"}),[]);return Object(m.jsxs)("div",{className:"fund-main",children:[Object(m.jsx)("img",{src:"./assets/idEDUF.png",alt:"header",className:"img-head"}),Object(m.jsx)("div",{className:"text-login-main",children:Object(m.jsxs)(p.f,{onSubmit:function(e){e.preventDefault();var n=document.getElementById("btnIngresar");n.classList.remove("btn-wfp-main"),n.classList.add("btn-wfp-main-press");var c=localStorage.getItem("lastPath")||"/",r=document.getElementById("userPassword").value,a=document.getElementById("userName");""===O?(a.classList.add("is-invalid"),document.getElementById("userName-error-msg").classList.add("wfp--form-requirement-show"),document.getElementById("userName-error-msg").style.display="block"):(a.classList.remove("is-invalid"),document.getElementById("userName-error-msg").classList.remove("wfp--form-requirement-show"));var i=document.getElementById("userPassword");(""===r?(i.classList.add("is-invalid"),document.getElementById("userPassword-error-msg").classList.add("wfp--form-requirement-show"),document.getElementById("userPassword-error-msg").style.display="block"):(i.classList.remove("is-invalid"),document.getElementById("userPassword-error-msg").classList.remove("wfp--form-requirement-show")),""!==O&&""!==r)&&G(O,r).then((function(e){s({type:f,payload:{name:e.data.user.name,token:e.data.access_token}}),t.replace(c)})).catch((function(e){console.warn(e),document.getElementById("invalidMessage").classList.add("invalid-tooltip-active")}))},className:"needs-validation",children:[Object(m.jsx)("strong",{id:"invalidMessage",className:"invalid-feedback",children:"* Identificaci\xf3n y/o Contrase\xf1a invalidas"}),Object(m.jsx)(p.m,{placeholder:"Identificaci\xf3n",className:"form-control txt-input",name:"userName",id:"userName",autoComplete:"off",value:O,onChange:b,invalid:{message:""},invalidText:"Identificaci\xf3n requerido",required:!0}),Object(m.jsx)(p.m,{type:"password",placeholder:"Contrase\xf1a",className:"form-control mb-3 txt-input",id:"userPassword",name:"userPassword",autoComplete:"off",invalid:{message:""},invalidText:"Contrase\xf1a requerida",required:!0}),Object(m.jsx)("br",{}),Object(m.jsx)(p.d,{id:"btnIngresar",type:"submit",className:"btn m-1 btn-block btn-wfp-main",children:"Ingresar"}),Object(m.jsx)("br",{}),Object(m.jsx)("br",{}),"\xbfAun no se ha registrado?",Object(m.jsx)("br",{}),"Por favor registrese",Object(m.jsx)("br",{}),Object(m.jsx)("br",{}),Object(m.jsx)("a",{href:"/registry",className:"btn m-1 btn-block btn-wfp-main",onClick:function(e){e.currentTarget.classList.remove("btn-wfp-main"),e.currentTarget.classList.add("btn-wfp-main-press")},children:"Registrarse"})]})}),Object(m.jsx)(D,{})]})},z=function(){var e=Object(w.a)(I.a.mark((function e(t,s,n,c,r){var a;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C.a.post("https://laravel.alusoft.co/api"+"/register?name=".concat(t,"&email=").concat(s,"&password=").concat(c,"&dni=").concat(n,"&password_confirmation=").concat(r),{});case 3:return a=e.sent,e.abrupt("return",a.data);case 7:throw e.prev=7,e.t0=e.catch(0),console.log(e.t0),e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,s,n,c,r){return e.apply(this,arguments)}}(),H=function(e){var t=e.history,s=Object(n.useContext)(d).dispatch;Object(n.useEffect)((function(){document.getElementById("userName-error-msg").style.display="none",document.getElementById("userEmail-error-msg").style.display="none",document.getElementById("userPassword-error-msg").style.display="none",document.getElementById("userConfPassword-error-msg").style.display="none",document.getElementById("userDni-error-msg").style.display="none"}),[]);return Object(m.jsxs)("div",{className:"fund-main",children:[Object(m.jsx)(p.g,{href:"/",children:Object(m.jsx)("img",{src:"./assets/idEDUF.png",alt:"header",className:"img-head"})}),Object(m.jsx)("div",{className:"text-reg-main",children:Object(m.jsxs)(p.f,{onSubmit:function(e){e.preventDefault();var n=document.getElementById("btnIngresar");n.classList.remove("btn-wfp-main"),n.classList.add("btn-wfp-main-press");var c=localStorage.getItem("lastPath")||"/",r=document.getElementById("userName"),a=r.value,i=document.getElementById("userEmail"),o=i.value,l=document.getElementById("userPassword"),d=l.value,u=document.getElementById("userConfPassword"),j=u.value,m=document.getElementById("userDni"),b=m.value;""===a?(r.classList.add("is-invalid"),document.getElementById("userName-error-msg").style.display="block"):(r.classList.remove("is-invalid"),document.getElementById("userName-error-msg").style.display="none"),""===o?(i.classList.add("is-invalid"),document.getElementById("userEmail-error-msg").style.display="block"):document.getElementById("userEmail-error-msg").style.display="none",""===d?(l.classList.add("is-invalid"),document.getElementById("userPassword-error-msg").style.display="block"):document.getElementById("userPassword-error-msg").style.display="none",""===j?(u.classList.add("is-invalid"),document.getElementById("userConfPassword-error-msg").style.display="block"):document.getElementById("userConfPassword-error-msg").style.display="none",""===b?(m.classList.add("is-invalid"),document.getElementById("userDni-error-msg").style.display="block"):document.getElementById("userDni-error-msg").style.display="none";var O=document.getElementById("invalidMessage");if(d===j){if(""!==a&&""!==o&&""!==b&&""!==d&&""!==j)z(a,o,b,d,j).then((function(e){s({type:f,payload:{name:e.data.user.name,token:e.data.access_token}}),t.replace(c)})).catch((function(e){console.warn(e)}));O.classList.remove("invalid-tooltip-active")}else O.classList.add("invalid-tooltip-active")},className:"needs-validation",children:[Object(m.jsx)("strong",{id:"invalidMessage",className:"invalid-feedback",children:"* Contrase\xf1a y confirmacion de Contrase\xf1a deben ser iguales"}),Object(m.jsx)(p.m,{placeholder:"Nombre",className:"form-control txt-input",name:"userName",id:"userName",autoComplete:"off",invalid:{message:""},invalidText:"Nombre requerido",required:!0}),Object(m.jsx)(p.m,{type:"email",placeholder:"Email",className:"form-control txt-input",name:"userEmail",id:"userEmail",autoComplete:"off",invalid:{message:""},invalidText:"Email requerido",required:!0}),Object(m.jsx)(p.m,{placeholder:"Identificacion",className:"form-control txt-input",name:"userDni",id:"userDni",autoComplete:"off",invalid:{message:""},invalidText:"Identificaci\xf3n requerida",required:!0}),Object(m.jsx)(p.m,{type:"password",placeholder:"Contrase\xf1a",className:"form-control txt-input",id:"userPassword",name:"userPassword",autoComplete:"off",invalid:{message:""},invalidText:"Contrase\xf1a requerida",required:!0}),Object(m.jsx)(p.m,{type:"password",placeholder:"Confirma Contrase\xf1a",className:"form-control txt-input",id:"userConfPassword",name:"userConfPassword",autoComplete:"off",invalid:{message:""},invalidText:"Confirmaci\xf3n requerida",required:!0}),Object(m.jsx)(p.d,{id:"btnIngresar",type:"submit",className:"btn m-1 btn-block btn-outline-primary btn-wfp-main",children:"Registrarse"})]})}),Object(m.jsx)(D,{})]})},K=function(){return Object(m.jsxs)(l.d,{children:[Object(m.jsx)(l.b,{exact:!0,path:"/",component:T}),Object(m.jsx)(l.b,{exact:!0,path:"/login",component:W}),Object(m.jsx)(l.b,{exact:!0,path:"/registry",component:H}),Object(m.jsx)(l.a,{to:"/"})]})},Q=function(){var e=Object(n.useContext)(d).user;return Object(m.jsx)(o.a,{children:Object(m.jsx)("div",{children:Object(m.jsxs)(l.d,{children:[Object(m.jsx)(h,{exact:!0,path:"/",component:K,isAuthenticated:e.logged}),Object(m.jsx)(h,{exact:!0,path:"/login",component:K,isAuthenticated:e.logged}),Object(m.jsx)(h,{exact:!0,path:"/registry",component:K,isAuthenticated:e.logged}),Object(m.jsx)(O,{path:"/",component:F,isAuthenticated:e.logged})]})})})},V=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f:return localStorage.setItem("userToken",t.payload.token),Object(u.a)(Object(u.a)({},t.payload),{},{logged:!0});case x:return localStorage.removeItem("userToken"),{logged:!1};default:return e}},X=(s(91),function(){return JSON.parse(localStorage.getItem("user"))||{logged:!1}}),Y=function(){var e=Object(n.useReducer)(V,{},X),t=Object(i.a)(e,2),s=t[0],c=t[1];return Object(n.useEffect)((function(){localStorage.setItem("user",JSON.stringify(s))}),[s]),Object(m.jsx)(d.Provider,{value:{user:s,dispatch:c},children:Object(m.jsx)(Q,{})})},Z=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,97)).then((function(t){var s=t.getCLS,n=t.getFID,c=t.getFCP,r=t.getLCP,a=t.getTTFB;s(e),n(e),c(e),r(e),a(e)}))};a.a.render(Object(m.jsx)(c.a.StrictMode,{children:Object(m.jsx)(Y,{})}),document.getElementById("root")),Z()}},[[92,1,2]]]);
//# sourceMappingURL=main.9a61016f.chunk.js.map